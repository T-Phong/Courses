
@model Courses.Models.DetailsExercise
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Details</h2>
<form>
    <div class="form-group">
        <label>ID Exercise</label>
        <input type="text" class="form-control" id="IDExercise" value="@Model.IDExercise" readonly="readonly">
    </div>
    <div class="form-group">
        <label>Student Name</label>
        <input type="text" class="form-control" id="UserName" value="@Model.Name" readonly="readonly">
        <input type="text" class="form-control" id="IDUser" value="@Model.IDUser" readonly="readonly" hidden>
    </div>
    <div class="form-group">
        <label>Exercise Name</label>
        <input type="text" class="form-control" id="ExerciseName" value="@Model.ExerciseName" disabled="disabled">
    </div>
    <div class="form-group">
        <label>Content</label>
        <input type="text" class="form-control" id="Content" value="@Model.Content" disabled="disabled">
    </div>
    <div class="form-group">
        <label>Create Date</label>
        <input type="text" class="form-control" id="CreateDate" value="@Model.CreateDate" disabled="disabled">
    </div>
    <div class="form-group">
        <label>Deadline</label>
        <input type="text" class="form-control" id="Deadline" value="@Model.DeadLine" disabled="disabled">
    </div>
    <div class="form-group">
        <label>Subject Name</label>
        <input type="text" class="form-control" id="SubjectName" value="@Model.SubjectName" readonly="readonly">
        <input type="text" class="form-control" id="IDSubject" value="@Model.IDSubject" readonly="readonly" hidden>
    </div>
    <div class="form-group">
        <label>Mark</label>
        <input type="text" class="form-control" id="Mark" value="@Model.Mark" disabled="disabled">
    </div>
    <button type="button" class="btn btn-primary" id="btnAdd" onclick="return editex();">Edit</button>
    <button type="button" class="btn btn-primary" id="btnAdd" onclick="return saveex();">Save change</button>
    <button type="button" class="btn btn-danger"><a href="Index">Back To Home</a></button>

</form>

<script>
    function editex() {
        $("input").removeAttr('disabled');
    }
    function saveex() {
        var empObj = {
            IDExercise: jQuery('#IDExercise').val(),
            IDUser: jQuery('#IDUser').val(),
            ExerciseName: jQuery('#ExerciseName').val(),
            Content: jQuery('#Content').val(),
            CreateDate: jQuery('#CreateDate').val(),
            Deadline: jQuery('#Deadline').val(),
            IDSubject: jQuery('#IDSubject').val(),
            Mark: jQuery('#Mark').val(),
        };
        $.ajax({
            url: "/Exercise/SaveEdit",
            data: JSON.stringify(empObj),
            type: "POST",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
                alert("success");
                window.location.reload();
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }
</script>

